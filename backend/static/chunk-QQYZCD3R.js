import{a as B}from"./chunk-IKJJW2AB.js";import{a as v,c as E,d as V,f as W,h as L,i as F,o as D,p as O,q as N}from"./chunk-SOJED64V.js";import{a as T}from"./chunk-FQ73GNGP.js";import{$a as b,Eb as y,Ja as h,La as n,Ma as i,Qa as M,Ra as S,Ta as P,Ua as r,Wa as C,Xa as m,Y as _,Ya as g,Za as u,ea as l,fa as d,ta as a,ua as c}from"./chunk-KKA7MAXA.js";var G=(()=>{class f{constructor(p,w){this.userService=p,this.authService=w,this.user={name:"",email:"",role:""},this.oldPassword="",this.newPassword="",this.confirmPassword="",this.isLoading=!1}ngOnInit(){this.loadProfile()}loadProfile(){this.userService.getProfile().subscribe({next:p=>this.user=p,error:()=>console.error("Erro ao carregar perfil")})}saveProfile(){this.isLoading=!0,this.userService.updateProfile(this.user).subscribe({next:()=>{alert("Perfil atualizado com sucesso!"),this.isLoading=!1},error:()=>{alert("Erro ao atualizar perfil."),this.isLoading=!1}})}changePassword(){if(this.newPassword!==this.confirmPassword){alert("As senhas n\xE3o coincidem!");return}this.authService.changePassword(this.oldPassword,this.newPassword).subscribe({next:()=>{alert("Senha alterada com sucesso!"),this.oldPassword="",this.newPassword="",this.confirmPassword=""},error:()=>alert("Erro ao alterar senha.")})}static{this.\u0275fac=function(w){return new(w||f)(c(B),c(T))}}static{this.\u0275cmp=_({type:f,selectors:[["app-settings"]],standalone:!0,features:[b],decls:44,vars:9,consts:[["profileForm","ngForm"],["passwordForm","ngForm"],[1,"container","mt-4","settings-page"],[1,"card","shadow","p-4","mb-4"],[1,"mb-3"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6","mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["for","role",1,"form-label"],["type","text","id","role","name","role","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid","mt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"card","shadow","p-4"],[1,"col-md-4","mb-3"],["for","currentPassword",1,"form-label"],["type","password","id","currentPassword","name","currentPassword","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","name","newPassword","required","","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-warning",3,"disabled"]],template:function(w,t){if(w&1){let o=M();n(0,"div",2)(1,"div",3)(2,"h4",4),r(3,"\u{1F464} Meu Perfil"),i(),n(4,"form",5,0),S("ngSubmit",function(){return l(o),d(t.saveProfile())}),n(6,"div",6)(7,"div",7)(8,"label",8),r(9,"Nome"),i(),n(10,"input",9),u("ngModelChange",function(e){return l(o),g(t.user.name,e)||(t.user.name=e),d(e)}),i()(),n(11,"div",7)(12,"label",10),r(13,"E-mail"),i(),n(14,"input",11),u("ngModelChange",function(e){return l(o),g(t.user.email,e)||(t.user.email=e),d(e)}),i()()(),n(15,"div",6)(16,"div",7)(17,"label",12),r(18,"Fun\xE7\xE3o"),i(),n(19,"input",13),u("ngModelChange",function(e){return l(o),g(t.user.role,e)||(t.user.role=e),d(e)}),i()()(),n(20,"div",14)(21,"button",15),r(22),i()()()(),n(23,"div",16)(24,"h4",4),r(25,"\u{1F512} Redefinir Senha"),i(),n(26,"form",5,1),S("ngSubmit",function(){return l(o),d(t.changePassword())}),n(28,"div",6)(29,"div",17)(30,"label",18),r(31,"Senha Atual"),i(),n(32,"input",19),u("ngModelChange",function(e){return l(o),g(t.oldPassword,e)||(t.oldPassword=e),d(e)}),i()(),n(33,"div",17)(34,"label",20),r(35,"Nova Senha"),i(),n(36,"input",21),u("ngModelChange",function(e){return l(o),g(t.newPassword,e)||(t.newPassword=e),d(e)}),i()(),n(37,"div",17)(38,"label",22),r(39,"Confirmar Nova Senha"),i(),n(40,"input",23),u("ngModelChange",function(e){return l(o),g(t.confirmPassword,e)||(t.confirmPassword=e),d(e)}),i()()(),n(41,"div",14)(42,"button",24),r(43," Redefinir Senha "),i()()()()()}if(w&2){let o=P(5),s=P(27);a(10),m("ngModel",t.user.name),a(4),m("ngModel",t.user.email),a(5),m("ngModel",t.user.role),a(2),h("disabled",!o.valid||t.isLoading),a(),C(" ",t.isLoading?"Salvando...":"Salvar Altera\xE7\xF5es"," "),a(10),m("ngModel",t.oldPassword),a(4),m("ngModel",t.newPassword),a(4),m("ngModel",t.confirmPassword),a(2),h("disabled",!s.valid)}},dependencies:[y,N,F,v,E,V,D,O,L,W],styles:[".settings-page[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:12px}.settings-page[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600}.settings-page[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500}.settings-page[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:600}"]})}}return f})();export{G as a};
