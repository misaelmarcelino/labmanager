import{a as N,c as k,d as F,f as W,h as L,i as j,o as q,p as A,q as D}from"./chunk-LJR2HZOE.js";import{a as B}from"./chunk-VU3Q3O6K.js";import{b as E,d as T}from"./chunk-APFEB53J.js";import{m as V,q as I}from"./chunk-K6RXEC2N.js";import{La as g,Na as m,Pa as i,Qa as r,Ra as f,Ua as y,Xa as S,Ya as w,Za as x,_ as C,_a as d,ab as h,bb as v,cb as P,db as M,fb as R,ha as c,ia as p,wa as s,xa as u}from"./chunk-TBSY5OFZ.js";function G(t,_){if(t&1&&(i(0,"div",18),d(1),r()),t&2){let n=w();s(),h(" ",n.errorMessage," ")}}function z(t,_){if(t&1&&(i(0,"div",19),d(1),r()),t&2){let n=w();s(),h(" ",n.successMessage," ")}}function H(t,_){t&1&&f(0,"span",20)}var Z=(()=>{class t{constructor(n,l,e){this.auth=n,this.route=l,this.router=e,this.newPassword="",this.confirmPassword="",this.errorMessage=null,this.successMessage=null,this.loading=!1,this.token=null,this.route.queryParams.subscribe(o=>{this.token=o.token||null})}submit(){if(this.errorMessage=null,this.successMessage=null,!this.newPassword||!this.confirmPassword){this.errorMessage="Por favor, preencha todos os campos.";return}if(this.newPassword!==this.confirmPassword){this.errorMessage="As senhas n\xE3o coincidem.";return}if(!this.token){this.errorMessage="Token inv\xE1lido ou expirado.";return}this.loading=!0,this.auth.resetPassword(this.token,this.newPassword).subscribe({next:()=>{this.successMessage="Senha redefinida com sucesso! Voc\xEA ser\xE1 redirecionado para o login.",setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:n=>{console.error("Erro ao redefinir senha:",n),this.errorMessage="Erro ao redefinir senha. Tente novamente mais tarde."},complete:()=>{this.loading=!1}})}static{this.\u0275fac=function(l){return new(l||t)(u(B),u(E),u(T))}}static{this.\u0275cmp=C({type:t,selectors:[["app-reset-password"]],standalone:!0,features:[R],decls:23,vars:6,consts:[["resetForm","ngForm"],[1,"reset-password","container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","shadow","p-4",2,"max-width","400px","width","100%"],[1,"text-center","mb-4"],["src","/assets/images/logo-painel.png","alt","Logo","height","60"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","name","newPassword","placeholder","Digite sua nova senha","required","","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Repita sua nova senha","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"mt-3","text-center"],["routerLink","/login",1,"text-decoration-none"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(l,e){if(l&1){let o=y();i(0,"div",1)(1,"div",2)(2,"h2",3),f(3,"img",4),r(),g(4,G,2,1,"div",5)(5,z,2,1,"div",6),i(6,"form",7,0),S("ngSubmit",function(){return c(o),p(e.submit())}),i(8,"div",8)(9,"label",9),d(10,"Nova senha:"),r(),i(11,"input",10),M("ngModelChange",function(a){return c(o),P(e.newPassword,a)||(e.newPassword=a),p(a)}),r()(),i(12,"div",8)(13,"label",11),d(14,"Confirme nova senha:"),r(),i(15,"input",12),M("ngModelChange",function(a){return c(o),P(e.confirmPassword,a)||(e.confirmPassword=a),p(a)}),r()(),i(16,"div",13)(17,"button",14),g(18,H,1,0,"span",15),d(19," Redefinir senha "),r()()(),i(20,"div",16)(21,"a",17),d(22,"Voltar ao login"),r()()()()}if(l&2){let o=x(7);s(4),m("ngIf",e.errorMessage),s(),m("ngIf",e.successMessage),s(6),v("ngModel",e.newPassword),s(4),v("ngModel",e.confirmPassword),s(2),m("disabled",o.invalid||e.loading||e.newPassword!==e.confirmPassword),s(),m("ngIf",e.loading)}},dependencies:[I,V,D,j,N,k,F,q,A,L,W]})}}return t})();export{Z as ResetPasswordComponent};
