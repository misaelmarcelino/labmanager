import{a as I,c as q,d as D,f as P,h as W,i as T,o as j,q as A}from"./chunk-YFECTA2Y.js";import{a as O}from"./chunk-YJEBKNWG.js";import{d as N,e as F}from"./chunk-CMUAIOSF.js";import{$a as E,Ab as L,Eb as V,Ha as M,Ja as u,La as e,Ma as t,Na as C,Qa as v,Ra as y,Sa as S,Ta as b,Ua as l,Wa as x,Xa as c,Y as _,Ya as h,Za as f,ea as d,fa as g,ta as s,ua as p}from"./chunk-LOHWPVPR.js";function R(o,k){if(o&1&&(e(0,"div",16),l(1),t()),o&2){let i=S();s(),x(" ",i.errorMessage," ")}}var X=(()=>{class o{constructor(i,n){this.auth=i,this.router=n,this.email="",this.password="",this.errorMessage=null,this.loading=!1}login(){this.loading=!0,this.errorMessage=null,this.auth.login(this.email,this.password).subscribe({next:i=>{if(this.loading=!1,i.is_first_access)this.router.navigate(["/redefinir-senha"],{queryParams:{email:this.email,first:!0}});else{let n=i.role==="ADMIN"?"/portal":"/home";this.router.navigate([n])}},error:()=>{this.loading=!1,this.errorMessage="Usu\xE1rio ou senha incorretos."}})}static{this.\u0275fac=function(n){return new(n||o)(p(O),p(N))}}static{this.\u0275cmp=_({type:o,selectors:[["app-login"]],standalone:!0,features:[E],decls:21,vars:4,consts:[["loginForm","ngForm"],[1,"login","container","d-flex","justify-content-center","align-items-center"],[1,"card","shadow","p-4"],[1,"text-center","mb-4"],["src","/assets/images/logo-painel.png","alt","Logo","height","60"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","placeholder","Digite seu email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","placeholder","Digite sua senha","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/esqueci-senha",1,"text-decoration-none"],[1,"alert","alert-danger"]],template:function(n,r){if(n&1){let m=v();e(0,"div",1)(1,"div",2)(2,"h2",3),C(3,"img",4),t(),M(4,R,2,1,"div",5),e(5,"form",6,0),y("ngSubmit",function(){return d(m),g(r.login())}),e(7,"div",7)(8,"label",8),l(9,"Email:"),t(),e(10,"input",9),f("ngModelChange",function(a){return d(m),h(r.email,a)||(r.email=a),g(a)}),t()(),e(11,"div",7)(12,"label",10),l(13,"Senha:"),t(),e(14,"input",11),f("ngModelChange",function(a){return d(m),h(r.password,a)||(r.password=a),g(a)}),t()(),e(15,"div",12)(16,"button",13),l(17," Entrar "),t()(),e(18,"div",14)(19,"a",15),l(20," Esqueci minha senha "),t()()()()()}if(n&2){let m=b(6);s(4),u("ngIf",r.errorMessage),s(6),c("ngModel",r.email),s(4),c("ngModel",r.password),s(2),u("disabled",m.invalid)}},dependencies:[V,L,A,T,I,q,D,j,W,P,F],styles:[".login[_ngcontent-%COMP%]{min-height:80vh}.login[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:400px;width:100%}"]})}}return o})();export{X as LoginComponent};
