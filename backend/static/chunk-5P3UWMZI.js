import{a as H}from"./chunk-UCC2Y4G3.js";import{a as M}from"./chunk-V4AC52ZC.js";import{a as y}from"./chunk-YJEBKNWG.js";import"./chunk-CMUAIOSF.js";import{$a as v,Ab as q,Db as b,Eb as C,Ha as d,Ja as s,La as i,Ma as n,Na as g,Sa as p,Ta as c,Ua as a,Va as m,Wa as E,Y as f,bb as h,cb as S,db as u,ta as o,ua as _,zb as I}from"./chunk-LOHWPVPR.js";function T(t,l){if(t&1&&(i(0,"div",9),a(1),n()),t&2){let e=p();o(),E(" ",e.errorMessage," ")}}function A(t,l){t&1&&(i(0,"th",5),a(1,"A\xE7\xF5es"),n())}function D(t,l){if(t&1&&(i(0,"span",16),a(1),n()),t&2){let e=p().$implicit;o(),m(e.status)}}function F(t,l){if(t&1&&(i(0,"span",18),a(1),n()),t&2){let e=p(2).$implicit;o(),m(e.status)}}function O(t,l){if(t&1&&(i(0,"span",19),a(1),n()),t&2){let e=p(2).$implicit;o(),m(e.status)}}function w(t,l){if(t&1&&d(0,F,2,1,"span",17)(1,O,2,1,"ng-template",null,2,u),t&2){let e=c(2),r=p().$implicit;s("ngIf",r.status==="REPROVADO")("ngIfElse",e)}}function P(t,l){if(t&1&&(i(0,"tr")(1,"td"),a(2),n(),i(3,"td"),a(4),n(),i(5,"td"),a(6),n(),i(7,"td"),a(8),n(),i(9,"td"),a(10),n(),i(11,"td"),a(12),h(13,"date"),n(),i(14,"td"),a(15),n(),i(16,"td"),d(17,D,2,1,"span",15)(18,w,3,2,"ng-template",null,1,u),n()()),t&2){let e=l.$implicit,r=c(19);o(2),m(e.codigo),o(2),m(e.nome_do_posto),o(2),m(e.razao_uso||"-"),o(2),m(e.versao_solucao),o(2),m(e.descricao),o(2),m(e.data_limite?S(13,9,e.data_limite,"dd/MM/yyyy"):"-"),o(3),m(e.responsavel),o(2),s("ngIf",e.status==="APROVADO")("ngIfElse",r)}}function $(t,l){if(t&1&&(i(0,"div")(1,"div",10)(2,"table",11)(3,"thead",12)(4,"tr")(5,"th"),a(6,"C\xF3digo"),n(),i(7,"th"),a(8,"Posto"),n(),i(9,"th"),a(10,"Raz\xE3o de Uso"),n(),i(11,"th"),a(12,"Vers\xE3o"),n(),i(13,"th"),a(14,"Motivo"),n(),i(15,"th"),a(16,"Data Limite"),n(),i(17,"th"),a(18,"Respons\xE1vel"),n(),i(19,"th"),a(20,"Status"),n(),d(21,A,2,0,"th",13),n()(),i(22,"tbody"),d(23,P,20,12,"tr",14),n()()()()),t&2){let e=p();o(21),s("ngIf",e.isAdmin()),o(2),s("ngForOf",e.equipamentos)}}function N(t,l){t&1&&(i(0,"div",20),a(1," Nenhum equipamento cadastrado at\xE9 o momento. "),n())}var G=(()=>{class t{constructor(e,r){this.auth=e,this.equipmentService=r,this.equipamentos=[],this.errorMessage=null,this.userRole=null}ngOnInit(){let e=this.auth.user;this.userRole=e?e.role:null,this.loadEquipamentos()}loadEquipamentos(){this.equipmentService.listAll().subscribe({next:e=>{this.equipamentos=e},error:e=>{console.error("Erro ao buscar equipamentos:",e),this.errorMessage="N\xE3o foi poss\xEDvel carregar equipamentos"}})}isAdmin(){return this.userRole?.toLowerCase()==="admin"}deleteEquipment(e){confirm("Deseja realmente excluir este equipamento?")&&this.equipmentService.delete(e).subscribe({next:()=>this.loadEquipamentos(),error:r=>{console.error("Erro ao excluir equipamento:",r),this.errorMessage="Erro ao excluir equipamento"}})}static{this.\u0275fac=function(r){return new(r||t)(_(y),_(M))}}static{this.\u0275cmp=f({type:t,selectors:[["app-home"]],standalone:!0,features:[v],decls:11,vars:3,consts:[["noEquipment",""],["elseStatus",""],["pending",""],[1,"content","flex-grow-1","p-4"],[1,"mb-4"],[1,"text-center"],[1,"container","mt-4"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"alert","alert-danger"],[1,"table-responsive","shadow-sm","rounded"],[1,"table","table-striped","table-hover","align-middle"],[1,"table-dark"],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],["class","badge bg-success",4,"ngIf","ngIfElse"],[1,"badge","bg-success"],["class","badge bg-danger",4,"ngIf","ngIfElse"],[1,"badge","bg-danger"],[1,"badge","bg-warning","text-dark"],[1,"alert","alert-info","mt-4","text-center"]],template:function(r,x){if(r&1&&(g(0,"app-header"),i(1,"main",3)(2,"div",4)(3,"h2",5)(4,"strong"),a(5," Equipamentos em Homologa\xE7\xE3o "),n()()(),i(6,"div",6),d(7,T,2,1,"div",7)(8,$,24,2,"div",8)(9,N,2,0,"ng-template",null,0,u),n()()),r&2){let R=c(10);o(7),s("ngIf",x.errorMessage),o(),s("ngIf",x.equipamentos.length>0)("ngIfElse",R)}},dependencies:[C,I,q,b,H]})}}return t})();export{G as HomeComponent};
