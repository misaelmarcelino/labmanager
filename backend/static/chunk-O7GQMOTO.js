import{a as y}from"./chunk-6E4SWIPS.js";import{a as C}from"./chunk-VU3Q3O6K.js";import"./chunk-APFEB53J.js";import{l as S,m as I,p as q,q as b}from"./chunk-K6RXEC2N.js";import{$a as l,La as d,Na as s,Pa as i,Qa as n,Ya as p,Za as c,_ as f,_a as a,ab as g,fb as v,hb as E,ib as h,jb as u,wa as o,xa as _}from"./chunk-TBSY5OFZ.js";function M(t,m){if(t&1&&(i(0,"div",7),a(1),n()),t&2){let e=p();o(),g(" ",e.errorMessage," ")}}function T(t,m){t&1&&(i(0,"th",13),a(1,"A\xE7\xF5es"),n())}function R(t,m){if(t&1&&(i(0,"span",15),a(1),n()),t&2){let e=p().$implicit;o(),l(e.status)}}function F(t,m){if(t&1&&(i(0,"span",17),a(1),n()),t&2){let e=p(2).$implicit;o(),l(e.status)}}function A(t,m){if(t&1&&(i(0,"span",18),a(1),n()),t&2){let e=p(2).$implicit;o(),l(e.status)}}function D(t,m){if(t&1&&d(0,F,2,1,"span",16)(1,A,2,1,"ng-template",null,2,u),t&2){let e=c(2),r=p().$implicit;s("ngIf",r.status==="Reprovado")("ngIfElse",e)}}function w(t,m){if(t&1&&(i(0,"tr")(1,"td"),a(2),n(),i(3,"td"),a(4),n(),i(5,"td"),a(6),n(),i(7,"td"),a(8),n(),i(9,"td"),a(10),n(),i(11,"td"),a(12),E(13,"date"),n(),i(14,"td"),a(15),n(),i(16,"td"),d(17,R,2,1,"span",14)(18,D,3,2,"ng-template",null,1,u),n()()),t&2){let e=m.$implicit,r=c(19);o(2),l(e.codigo),o(2),l(e.nome_do_posto),o(2),l(e.razao_uso||"-"),o(2),l(e.versao_solucao),o(2),l(e.descricao),o(2),l(e.data_limite?h(13,9,e.data_limite,"dd/MM/yyyy"):"-"),o(3),l(e.responsavel),o(2),s("ngIf",e.status==="Aprovado")("ngIfElse",r)}}function $(t,m){if(t&1&&(i(0,"div")(1,"div",8)(2,"table",9)(3,"thead",10)(4,"tr")(5,"th"),a(6,"C\xF3digo"),n(),i(7,"th"),a(8,"Posto"),n(),i(9,"th"),a(10,"Raz\xE3o de Uso"),n(),i(11,"th"),a(12,"Vers\xE3o"),n(),i(13,"th"),a(14,"Motivo"),n(),i(15,"th"),a(16,"Data Limite"),n(),i(17,"th"),a(18,"Respons\xE1vel"),n(),i(19,"th"),a(20,"Status"),n(),d(21,T,2,0,"th",11),n()(),i(22,"tbody"),d(23,w,20,12,"tr",12),n()()()()),t&2){let e=p();o(21),s("ngIf",e.isAdmin()),o(2),s("ngForOf",e.equipamentos)}}function N(t,m){t&1&&(i(0,"div",19),a(1," Nenhum equipamento cadastrado at\xE9 o momento. "),n())}var B=(()=>{class t{constructor(e,r){this.auth=e,this.equipmentService=r,this.equipamentos=[],this.errorMessage=null,this.userRole=null}ngOnInit(){let e=this.auth.user;this.userRole=e?e.role:null,this.loadEquipamentos()}loadEquipamentos(){this.equipmentService.listAll().subscribe({next:e=>{this.equipamentos=e},error:e=>{console.error("Erro ao buscar equipamentos:",e),this.errorMessage="N\xE3o foi poss\xEDvel carregar equipamentos"}})}isAdmin(){return this.userRole?.toLowerCase()==="admin"}deleteEquipment(e){confirm("Deseja realmente excluir este equipamento?")&&this.equipmentService.delete(e).subscribe({next:()=>this.loadEquipamentos(),error:r=>{console.error("Erro ao excluir equipamento:",r),this.errorMessage="Erro ao excluir equipamento"}})}static{this.\u0275fac=function(r){return new(r||t)(_(C),_(y))}}static{this.\u0275cmp=f({type:t,selectors:[["app-home"]],standalone:!0,features:[v],decls:6,vars:3,consts:[["noEquipment",""],["elseStatus",""],["pending",""],[1,"content","flex-grow-1","p-4"],[1,"container","mt-4"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"alert","alert-danger"],[1,"table-responsive","shadow-sm","rounded"],[1,"table","table-striped","table-hover","align-middle"],[1,"table-dark"],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],["class","badge bg-success",4,"ngIf","ngIfElse"],[1,"badge","bg-success"],["class","badge bg-danger",4,"ngIf","ngIfElse"],[1,"badge","bg-danger"],[1,"badge","bg-warning","text-dark"],[1,"alert","alert-info","mt-4","text-center"]],template:function(r,x){if(r&1&&(i(0,"main",3)(1,"div",4),d(2,M,2,1,"div",5)(3,$,24,2,"div",6)(4,N,2,0,"ng-template",null,0,u),n()()),r&2){let H=c(5);o(2),s("ngIf",x.errorMessage),o(),s("ngIf",x.equipamentos.length>0)("ngIfElse",H)}},dependencies:[b,S,I,q]})}}return t})();export{B as HomeComponent};
