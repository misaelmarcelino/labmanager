import"./chunk-LPNLCX2L.js";import{a as I,c as q,d as D,f as P,h as W,i as T,o as j,q as A}from"./chunk-LJR2HZOE.js";import{a as O}from"./chunk-SROPCUAA.js";import{d as N,e as F}from"./chunk-APFEB53J.js";import{m as L,q as V}from"./chunk-K6RXEC2N.js";import{La as M,Na as u,Pa as e,Qa as t,Ra as C,Ua as v,Xa as y,Ya as S,Za as b,_,_a as l,ab as x,bb as c,cb as h,db as f,fb as E,ha as d,ia as g,wa as s,xa as p}from"./chunk-TBSY5OFZ.js";function R(r,k){if(r&1&&(e(0,"div",16),l(1),t()),r&2){let i=S();s(),x(" ",i.errorMessage," ")}}var Z=(()=>{class r{constructor(i,n){this.auth=i,this.router=n,this.email="",this.password="",this.errorMessage=null,this.loading=!1}login(){this.loading=!0,this.errorMessage=null,this.auth.login(this.email,this.password).subscribe({next:i=>{if(this.loading=!1,i.is_first_access)this.router.navigate(["/redefinir-senha"],{queryParams:{email:this.email,first:!0}});else{let n=i.role==="ADMIN"?"/portal":"/home";this.router.navigate([n])}},error:()=>{this.loading=!1,this.errorMessage="Usu\xE1rio ou senha incorretos."}})}static{this.\u0275fac=function(n){return new(n||r)(p(O),p(N))}}static{this.\u0275cmp=_({type:r,selectors:[["app-login"]],standalone:!0,features:[E],decls:21,vars:4,consts:[["loginForm","ngForm"],[1,"login","container","d-flex","justify-content-center","align-items-center"],[1,"card","shadow","p-4"],[1,"text-center","mb-4"],["src","/assets/images/logo-painel.png","alt","Logo","height","60"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","placeholder","Digite seu email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","placeholder","Digite sua senha","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/esqueci-senha",1,"text-decoration-none"],[1,"alert","alert-danger"]],template:function(n,o){if(n&1){let m=v();e(0,"div",1)(1,"div",2)(2,"h2",3),C(3,"img",4),t(),M(4,R,2,1,"div",5),e(5,"form",6,0),y("ngSubmit",function(){return d(m),g(o.login())}),e(7,"div",7)(8,"label",8),l(9,"Email:"),t(),e(10,"input",9),f("ngModelChange",function(a){return d(m),h(o.email,a)||(o.email=a),g(a)}),t()(),e(11,"div",7)(12,"label",10),l(13,"Senha:"),t(),e(14,"input",11),f("ngModelChange",function(a){return d(m),h(o.password,a)||(o.password=a),g(a)}),t()(),e(15,"div",12)(16,"button",13),l(17," Entrar "),t()(),e(18,"div",14)(19,"a",15),l(20," Esqueci minha senha "),t()()()()()}if(n&2){let m=b(6);s(4),u("ngIf",o.errorMessage),s(6),c("ngModel",o.email),s(4),c("ngModel",o.password),s(2),u("disabled",m.invalid)}},dependencies:[V,L,A,T,I,q,D,j,W,P,F],styles:[".login[_ngcontent-%COMP%]{min-height:80vh}.login[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{max-width:400px;width:100%}"]})}}return r})();export{Z as LoginComponent};
