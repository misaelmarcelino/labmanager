import"./chunk-A33C23ZQ.js";import"./chunk-Z655ARMT.js";import"./chunk-6E4SWIPS.js";import"./chunk-PLVXQEY7.js";import"./chunk-77VMSZOX.js";import{a as te}from"./chunk-KQ3Y33YD.js";import"./chunk-FZNVQCVF.js";import{a as ne}from"./chunk-5SG2J563.js";import{a as B,b as d,c as $,d as J,e as y,g as u,i as K,j as Q,k as W,l as X,m as Y,n as Z,r as ee}from"./chunk-LJR2HZOE.js";import{a as k}from"./chunk-VU3Q3O6K.js";import{a as L,c as M,d as U,e as G,f as j,g as H}from"./chunk-APFEB53J.js";import{k as V,m as R,n as A,o as F,q as w,v as q,w as z}from"./chunk-K6RXEC2N.js";import{$a as N,La as v,Na as c,Pa as n,Qa as o,Ra as a,Sa as S,Ta as E,Ua as x,V as P,Xa as f,Ya as s,_ as g,_a as i,ab as O,fb as h,ha as _,ia as C,rb as D,wa as m,xa as b}from"./chunk-TBSY5OFZ.js";function se(e,p){if(e&1){let t=x();n(0,"div",2),f("click",function(){_(t);let l=s();return C(l.cancel())}),o()}}function de(e,p){if(e&1&&(n(0,"p",19),i(1),o()),e&2){let t=s(2);m(),O(" ",t.config.message," ")}}function ue(e,p){if(e&1&&(n(0,"p",19),i(1),o()),e&2){let t=s(2);m(),O(" ",t.config.message," ")}}function fe(e,p){e&1&&(S(0),n(1,"label"),i(2,"Nome:"),o(),a(3,"input",22),n(4,"label"),i(5,"Email:"),o(),a(6,"input",23),n(7,"label"),i(8,"Fun\xE7\xE3o:"),o(),n(9,"select",24)(10,"option",25),i(11,"Administrador"),o(),n(12,"option",26),i(13,"Usu\xE1rio"),o()(),E())}function ge(e,p){e&1&&(S(0),n(1,"label"),i(2,"C\xF3digo:"),o(),a(3,"input",27),n(4,"label"),i(5,"Posto:"),o(),a(6,"input",28),n(7,"label"),i(8,"Raz\xE3o de Uso:"),o(),n(9,"select",29)(10,"option",30),i(11,"Abastece"),o(),n(12,"option",31),i(13,"Estacione"),o(),n(14,"option",32),i(15,"Drive"),o(),n(16,"option",33),i(17,"Concession\xE1ria"),o(),n(18,"option",34),i(19,"Outros"),o()(),n(20,"label"),i(21,"Vers\xE3o da Solu\xE7\xE3o:"),o(),a(22,"input",35),n(23,"label"),i(24,"Descri\xE7\xE3o:"),o(),a(25,"input",36),n(26,"label"),i(27,"Data Limite:"),o(),a(28,"input",37),n(29,"label"),i(30,"Respons\xE1vel:"),o(),a(31,"input",38),n(32,"label"),i(33,"Status:"),o(),n(34,"select",39)(35,"option",40),i(36,"Pendente"),o(),n(37,"option",41),i(38,"Aprovado"),o(),n(39,"option",42),i(40,"Reprovado"),o()(),E())}function _e(e,p){if(e&1){let t=x();n(0,"form",20),f("ngSubmit",function(){_(t);let l=s(2);return C(l.confirm())}),v(1,fe,14,0,"ng-container",21)(2,ge,41,0,"ng-container",21),o()}if(e&2){let t=s(2);c("formGroup",t.form),m(),c("ngIf",t.config.entityType==="user"),m(),c("ngIf",t.config.entityType==="equipment")}}function Ce(e,p){if(e&1){let t=x();n(0,"button",43),f("click",function(){_(t);let l=s(2);return C(l.confirm())}),a(1,"i",44),i(2," Salvar "),o()}if(e&2){let t=s(2);c("disabled",t.form.invalid)}}function he(e,p){if(e&1){let t=x();n(0,"button",45),f("click",function(){_(t);let l=s(2);return C(l.confirm())}),a(1,"i",44),i(2," Confirmar "),o()}}function xe(e,p){if(e&1){let t=x();n(0,"button",46),f("click",function(){_(t);let l=s(2);return C(l.cancel())}),a(1,"i",47),i(2," Fechar "),o()}}function be(e,p){if(e&1){let t=x();n(0,"div",3)(1,"div",4)(2,"header",5)(3,"h3",6),i(4),o(),n(5,"button",7),f("click",function(){_(t);let l=s();return C(l.cancel())}),a(6,"i",8),o()(),n(7,"section",9),S(8,10),v(9,de,2,1,"p",11)(10,ue,2,1,"p",11)(11,_e,3,3,"form",12),E(),o(),n(12,"footer",13)(13,"button",14),f("click",function(){_(t);let l=s();return C(l.cancel())}),a(14,"i",15),i(15," Cancelar "),o(),v(16,Ce,3,1,"button",16)(17,he,3,0,"button",17)(18,xe,3,0,"button",18),o()()()}if(e&2){let t=s();m(),c("ngClass",t.config.type),m(3),N(t.config.title),m(4),c("ngSwitch",t.config.type),m(),c("ngSwitchCase","info"),m(),c("ngSwitchCase","confirm"),m(),c("ngSwitchCase","form"),m(5),c("ngIf",t.config.type==="form"),m(),c("ngIf",t.config.type==="confirm"),m(),c("ngIf",t.config.type==="info")}}var oe=(()=>{class e{constructor(t,r){this.modalService=t,this.cdr=r,this.visible=!1,this.config={},this.form=new y({}),this.modalService.modalState$.subscribe(l=>{l?this.open(l):this.close()})}open(t){this.config=t,this.visible=!0,t.type==="form"&&this.initializeForm(t.data),this.cdr.detectChanges()}close(){this.visible=!1,this.form.reset()}initializeForm(t={}){console.log("\u{1F9E9} Tipo de entidade recebido:",this.config.entityType),this.config.entityType==="equipment"?this.form=new y({codigo:new u(t.codigo??"",d.required),nome_do_posto:new u(t.nome_do_posto??"",d.required),razao_uso:new u(t.razao_uso??"",d.required),versao_solucao:new u(t.versao_solucao??"",d.required),descricao:new u(t.descricao??"",d.required),data_limite:new u(t.data_limite??"",d.required),responsavel:new u(t.responsavel??"",d.required),status:new u(t.status??"PENDENTE",d.required)}):this.form=new y({name:new u(t.name??"",d.required),email:new u(t.email??"",[d.required,d.email]),role:new u((t.role??"USER").toUpperCase())})}confirm(){this.config.type==="form"&&this.form.valid?this.config.onConfirm?.(this.form.value):this.config.onConfirm?.(),this.modalService.close()}cancel(){this.config.onCancel?.(),this.modalService.close()}static{this.\u0275fac=function(r){return new(r||e)(b(te),b(D))}}static{this.\u0275cmp=g({type:e,selectors:[["app-modal"]],standalone:!0,features:[h],decls:2,vars:2,consts:[["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-container",4,"ngIf"],[1,"modal-backdrop",3,"click"],[1,"modal-container"],[1,"modal-box","animate-in",3,"ngClass"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-x-lg"],[1,"modal-body"],[3,"ngSwitch"],["class","modal-message",4,"ngSwitchCase"],["class","form-grid",3,"formGroup","ngSubmit",4,"ngSwitchCase"],[1,"modal-actions"],["type","button",1,"btn-cancel",3,"click"],[1,"bi","bi-x-circle"],["type","submit","class","btn-confirm",3,"disabled","click",4,"ngIf"],["class","btn-confirm",3,"click",4,"ngIf"],["class","btn-ok",3,"click",4,"ngIf"],[1,"modal-message"],[1,"form-grid",3,"ngSubmit","formGroup"],[4,"ngIf"],["formControlName","name","placeholder","Digite o nome"],["formControlName","email","placeholder","Digite o email"],["formControlName","role"],["value","ADMIN"],["value","USER"],["formControlName","codigo","placeholder","Digite o c\xF3digo do posto"],["formControlName","nome_do_posto","placeholder","Digite o nome do posto"],["formControlName","razao_uso"],["value","ABASTECE"],["value","ESTACIONE"],["value","DRIVE"],["value","CONCESSIONARIA"],["value","OUTROS"],["formControlName","versao_solucao","placeholder","Digite a vers\xE3o da solu\xE7\xE3o"],["formControlName","descricao","placeholder","Digite uma breve descricao de homologa\xE7\xE3o"],["type","date","formControlName","data_limite"],["formControlName","responsavel","placeholder","Respons\xE1vel pelo equipamento"],["formControlName","status"],["value","PENDENTE"],["value","APROVADO"],["value","REPROVADO"],["type","submit",1,"btn-confirm",3,"click","disabled"],[1,"bi","bi-check-circle"],[1,"btn-confirm",3,"click"],[1,"btn-ok",3,"click"],[1,"bi","bi-check2-circle"]],template:function(r,l){r&1&&v(0,se,1,0,"div",0)(1,be,19,9,"div",1),r&2&&(c("ngIf",l.visible),m(),c("ngIf",l.visible))},dependencies:[w,V,R,A,F,ee,K,Y,Z,B,X,$,J,Q,W],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0009;z-index:1000}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;z-index:1001}.modal-box[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;min-width:500px;max-width:480px;box-shadow:0 5px 25px #0000004d}.modal-title[_ngcontent-%COMP%]{margin-bottom:12px;font-size:1.2rem;font-weight:600}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:16px}.btn-cancel[_ngcontent-%COMP%], .btn-confirm[_ngcontent-%COMP%], .btn-ok[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#ddd}.btn-confirm[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-ok[_ngcontent-%COMP%]{background:#28a745;color:#fff}.form-grid[_ngcontent-%COMP%]{display:grid;gap:12px;margin-top:16px}.form-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.form-grid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;width:100%}.modal-box.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .25s ease-out}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.btn-close[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-size:1.2rem;opacity:.6;transition:opacity .2s}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.form-errors[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#dc3545;display:block}"]})}}return e})();var ie=(()=>{class e{constructor(){this.title="frontend"}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-root"]],standalone:!0,features:[h],decls:2,vars:0,template:function(r,l){r&1&&a(0,"router-outlet")(1,"app-modal")},dependencies:[M,oe]})}}return e})();var I=(e,p)=>{let t=P(k),r=P(U);if(!t.isLoggedIn)return r.createUrlTree(["/login"]);let l=e.data?.role;return l&&(t.user?.role??"").toLowerCase()!==l.toLowerCase()?r.createUrlTree(["/home"]):(console.log("Guard: rota permitida"),!0)};var re=(()=>{class e{constructor(t){this.auth=t}logout(){this.auth.logout()}static{this.\u0275fac=function(r){return new(r||e)(b(k))}}static{this.\u0275cmp=g({type:e,selectors:[["app-portal-sidebar"]],standalone:!0,features:[h],decls:26,vars:0,consts:[[1,"sidebar"],[1,"navbar","text-white"],[1,"nav","flex-column"],[1,"nav-item","mb-2"],["routerLink","/portal/dashboard",1,"nav-link","text-white"],[1,"bi","bi-speedometer2"],["routerLink","/portal/equipamentos",1,"nav-link","text-white"],[1,"bi","bi-hdd-stack"],["routerLink","/portal/usuarios",1,"nav-link","text-white"],[1,"bi","bi-people-fill"],["routerLink","/portal/relatorios",1,"nav-link","text-white"],[1,"bi","bi-file-earmark-text-fill"],["routerLink","/portal/configuracoes",1,"nav-link","text-white"],[1,"bi","bi-gear"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-box-arrow-right","p-1"]],template:function(r,l){r&1&&(n(0,"div",0)(1,"nav",1)(2,"ul",2)(3,"li",3)(4,"a",4),a(5,"i",5),i(6," Dashboard "),o()(),n(7,"li",3)(8,"a",6),a(9,"i",7),i(10," Equipamentos "),o()(),n(11,"li",3)(12,"a",8),a(13,"i",9),i(14," Gest\xE3o de Usu\xE1rios "),o()(),n(15,"li",3)(16,"a",10),a(17,"i",11),i(18," Relat\xF3rios "),o()(),n(19,"li",3)(20,"a",12),a(21,"i",13),i(22," Configura\xE7\xF5es "),o()()()(),n(23,"button",14),f("click",function(){return l.logout()}),i(24," Sair "),a(25,"i",15),o()())},dependencies:[G],styles:[".sidebar[_ngcontent-%COMP%]{background-color:#343a40;width:250px;height:calc(100vh - 80px);display:flex;flex-direction:column;padding:10px 0}.sidebar[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{width:100%;height:100%;padding:0;display:flex;flex-direction:column;justify-content:start;align-items:start}.sidebar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:90%;margin:0 auto;text-align:right}@media (max-width: 768px){.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{flex:0 0 auto;width:100%;height:auto;box-shadow:none}}"]})}}return e})();var ae=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-portal"]],standalone:!0,features:[h],decls:5,vars:0,consts:[[1,"main"],[1,"portal-content"]],template:function(r,l){r&1&&(a(0,"app-header"),n(1,"main",0),a(2,"app-portal-sidebar"),n(3,"div",1),a(4,"router-outlet"),o()())},dependencies:[w,H,M,ne,re],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.main[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;overflow:hidden}.main[_ngcontent-%COMP%]   .portal-content[_ngcontent-%COMP%]{flex:1 1 auto;height:calc(100vh - 80px);overflow-y:auto;padding:1.5rem;background-color:#fff}@media (max-width: 768px){.main[_ngcontent-%COMP%]{flex-direction:column}.main[_ngcontent-%COMP%]   app-portal-sidebar[_ngcontent-%COMP%]{flex:0 0 auto;width:100%;height:auto;box-shadow:none}.main[_ngcontent-%COMP%]   .portal-content[_ngcontent-%COMP%]{padding:1rem}}']})}}return e})();var le=[{path:"",loadComponent:()=>import("./chunk-PPMKXWXJ.js").then(e=>e.LoginComponent)},{path:"login",loadComponent:()=>import("./chunk-PPMKXWXJ.js").then(e=>e.LoginComponent)},{path:"",redirectTo:"login",pathMatch:"full"},{path:"esqueci-senha",loadComponent:()=>import("./chunk-PIIU6V6Z.js").then(e=>e.ForgotPasswordComponent)},{path:"redefinir-senha",loadComponent:()=>import("./chunk-7GX2GFUS.js").then(e=>e.ResetPasswordComponent)},{path:"portal",component:ae,canActivate:[I],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-Y5ZS2UU2.js").then(e=>e.DashboardComponent)},{path:"equipamentos",loadComponent:()=>import("./chunk-A4SU7IP5.js").then(e=>e.EquipmentsComponent)},{path:"usuarios",loadComponent:()=>import("./chunk-EG6QQTMM.js").then(e=>e.UsersComponent)},{path:"relatorios",loadComponent:()=>import("./chunk-TILDKYLO.js").then(e=>e.ReportsComponent)},{path:"configuracoes",loadComponent:()=>import("./chunk-65IRCRLL.js").then(e=>e.SettingsComponent)},{path:"",redirectTo:"portal",pathMatch:"full"}]},{path:"home",loadComponent:()=>import("./chunk-O7GQMOTO.js").then(e=>e.HomeComponent),canActivate:[I]},{path:"**",redirectTo:"login"}];var me=(e,p)=>{let t=localStorage.getItem("auth_token");if(t){let r=e.clone({setHeaders:{Authorization:`Bearer ${t}`}});return p(r)}return p(e)};var ce={providers:[j(le),q(z([me]))]};L(ie,ce).catch(e=>console.error(e));
